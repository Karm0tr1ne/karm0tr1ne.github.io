<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Utopia</title>
  
  <subtitle>Kyrie eleison.</subtitle>
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2022-01-07T10:24:54.543Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>Karmotrine</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Unityä¸­å¦‚ä½•è®¾ç½®æ¸¸æˆå­˜æ¡£æ–¹æ³•å½’çº³</title>
    <link href="http://example.com/2021/06/26/Unity%E4%B8%AD%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%E6%B8%B8%E6%88%8F%E5%AD%98%E6%A1%A3%E6%96%B9%E6%B3%95%E5%BD%92%E7%BA%B3/"/>
    <id>http://example.com/2021/06/26/Unity%E4%B8%AD%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%E6%B8%B8%E6%88%8F%E5%AD%98%E6%A1%A3%E6%96%B9%E6%B3%95%E5%BD%92%E7%BA%B3/</id>
    <published>2021-06-26T03:42:20.000Z</published>
    <updated>2022-01-07T10:24:54.543Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1399789328&auto=1&height=66"></iframe><p>æœ€è¿‘å±å®æœ‰ç‚¹å¿™ï¼ˆå¦‚æœæ‰“æ¸¸æˆä¹Ÿç®—å¿™çš„è¯ï¼‰ï¼Œä¸€ç›´æ‹–åˆ°äº†æ”¾å‡ç¬¬ä¸€ä¸ªç¤¼æ‹œç»“æŸã€‚ã€‚ã€‚</p><p>æ‰€ä»¥æˆ‘å†³å®šä¸å’•äº†ï¼å†™ä¸€ç¯‡unityå­˜æ¡£çš„ä¸œè¥¿å‡ºæ¥ï¼<del>ï¼ˆå…¶å®æ˜¯å®åœ¨æ²¡äº‹æƒ…å¹²äº†ï¼‰</del></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>â€‹        ä¼—æ‰€å‘¨çŸ¥ï¼Œå­˜æ¡£åœ¨è®¸å¤šæ¸¸æˆä¸­å·²ç»æˆä¸ºäº†ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼Œå…ˆä¸è®ºè”æœºçš„ç½‘ç»œæ¸¸æˆï¼Œä¸€äº›é•¿æµç¨‹æ¸¸æˆï¼Œæ¯”å¦‚é»‘å¸æ–¯ï¼Œç©ºæ´éª‘å£«ç­‰ï¼ˆè®©æˆ‘å’•çš„ä¸‡æ¶ä¹‹æºå±äºæ˜¯ï¼‰ï¼Œè¿™æ ·ä¸å­˜æ¡£è®©ç©å®¶è¿ç»­èŠ±30+ä¸ªå°æ—¶ç”šè‡³æ›´ä¹…å±å®æ˜¯è®©ç©å®¶åç‰¢ï¼Œå˜æˆäº†ç­å°¼ç‰¹ç¦å¾·ä¹‹ç±»çš„é˜´é—´æ¸¸æˆã€‚è¿™ä¸ä»…å¯¹ç©å®¶æ˜¯åç‰¢ï¼Œå¯¹æµ‹è¯•æ¸¸æˆçš„äººæ›´æ˜¯ä¸€ç§å…¨æ–°çš„åç‰¢ä½“éªŒï¼šè¦æ˜¯è¦æµ‹è¯•åé¢çš„å…³å¡æœ‰æ²¡æœ‰bugï¼Œé‚£å°±ä¸€å®šè¦æŠŠå‰é¢çš„æ‰“äº†ï¼Œç„¶åæµ‹å‡ºäº†bugæ¸¸æˆè¿è¡Œä¸äº†æ”¹äº†bugè¦é‡æ–°æ¥ï¼Œæƒ³æƒ³å°±ç¦»è°±ã€‚ä½†å¦‚æœæ‹¿ç‰¹å®šçš„å­˜æ¡£è¿›å»æµ‹è¯•é‚£è‚¯å®šå°‘äº†å¾ˆå¤šæ—¶é—´å’Œç²¾åŠ›ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œå•æœºæ¸¸æˆå­˜æ¡£çš„å¥½å¤„å¦‚ä¸‹ï¼š</p><p><strong>1.é•¿æµç¨‹æ¸¸æˆå¯ä»¥è®©ç©å®¶åˆ†å‡ æ¬¡ä½“éªŒï¼Œå¤±è´¥äº†ä¹Ÿå¯ä»¥é‡æ–°è¯»æ¡£ï¼Œå‡å°‘äº†ç©å®¶çš„åç‰¢ä½“éªŒ</strong></p><p><strong>2.æµ‹è¯•æ—¶å¯ä»¥ç›´æ¥è¿›å…¥ç‰¹å®šåœ°ç‚¹è¿›è¡Œæµ‹è¯•ï¼Œä¸éœ€è¦ä»å¤´æ‰“èµ·ä¸æ–­è¢«è‡ªå·±çš„ç²ªä½œexåˆ°</strong></p><p><strong>3.è‚¯å®šè¿˜æœ‰ä½†æˆ‘æ‡’å¾—æƒ³äº†</strong></p><p>å¯¹æ­¤ï¼ŒUnityæœ‰è¿™å‡ ç§æ–¹æ³•è¿›è¡Œæ¸¸æˆå­˜æ¡£ï¼š</p><h2 id="PlayerPrefsçš„å¦™ç”¨"><a href="#PlayerPrefsçš„å¦™ç”¨" class="headerlink" title="PlayerPrefsçš„å¦™ç”¨"></a>PlayerPrefsçš„å¦™ç”¨</h2><p>å¯¹äºå­˜æ¡£ï¼ŒUnityç‰¹åˆ«åœ¨è„šæœ¬é‡Œæä¾›äº†PlayerPrefsç±»çš„æ–¹æ³•ã€‚å®ƒçš„æ–¹æ³•æ˜¯æä¾›ç»™ç©å®¶intï¼Œfloatï¼Œstringä¸‰ä¸ªç±»å‹è¿›è¡Œå‚¨å­˜ä¸ä¿®æ”¹ã€‚æ¯ä¸€ä¸ªå˜é‡åéƒ½å¯¹åº”è¿™ä¸€ä¸ªå€¼ï¼Œä¹Ÿå°±æ˜¯é”®å€¼å¯¹ï¼Œç±»ä¼¼äºå­—å…¸ç±»å‹ã€‚è¿™ä¸‰ä¸ªç±»å‹çš„å˜é‡åå’Œå€¼éƒ½æ˜¯ç›´æ¥å‚¨å­˜åœ¨æ–‡ä»¶é‡Œçš„ï¼Œæ‰€ä»¥å¯ä»¥è¾¾åˆ°å‚¨å­˜è½»é‡æ•°æ®çš„å¯èƒ½ã€‚</p><p>ç›¸å…³ä»£ç ä¹Ÿå¾ˆç®€å•ï¼Œå…·ä½“æ˜¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">PlayerPrefs.SetString(&quot;Name&quot;,name); //å‚¨å­˜stringç±»å˜é‡</span><br><span class="line">PlayerPrefs.SetFloat(&quot;Name&quot;,name); //å‚¨å­˜floatç±»å˜é‡</span><br><span class="line">PlayerPrefs.SetInt(&quot;Name&quot;,name); //å‚¨å­˜intç±»å˜é‡</span><br><span class="line">//è¿™ä¸‰ä¸ªçš„æ„æ€æ˜¯ï¼šåˆ›å»ºåå­—å«Nameçš„å˜é‡åœ¨PlayerPrefsé‡Œï¼Œ</span><br><span class="line">//åŒæ—¶ä»–ä»¬çš„å€¼å’Œnameç›¸ç­‰ï¼ˆå½“ç„¶nameä¹Ÿå¯ä»¥ç›´æ¥æ‰“float,int,stringç±»å‹çš„å¸¸é‡ï¼‰</span><br><span class="line">Str=PlayerPrefs.GetString(&quot;Name&quot;); //è¯»å–stringç±»å˜é‡å¹¶å­˜åœ¨Stré‡Œ</span><br><span class="line">I=PlayerPrefs.GetInt(&quot;Name&quot;); //è¯»å–intç±»å˜é‡å¹¶å­˜åœ¨Ié‡Œ</span><br><span class="line">F=PlayerPrefs.GetFloat(&quot;Name&quot;); //è¯»å–floatç±»å˜é‡å¹¶å­˜åœ¨Fé‡Œ</span><br><span class="line">//å¦‚æœä¸å­˜åœ¨Nameï¼Œé‚£ä¹ˆä¼šè¿”å›0</span><br><span class="line">PlayerPrefs.DeleteAll(); //åˆ é™¤æ‰€æœ‰é”®å’Œå€¼</span><br><span class="line">PlayerPrefs.DeleteKey(&quot;Name&quot;); //åˆ é™¤Nameçš„é”®å’Œå€¼</span><br><span class="line">PlayerPrefs.HasKey(&quot;Name&quot;); //åˆ¤æ–­æ˜¯å¦å­˜åœ¨Nameè¿™ä¸ªé”®å¹¶è¿”å›trueæˆ–è€…false</span><br></pre></td></tr></table></figure><p>è¿™äº›ä»£ç è™½ç„¶å¾ˆç®€å•ï¼Œä½†æ˜¯åªèƒ½å­˜å‚¨ä¸‰ä¸ªç±»å‹è€Œä¸”ä¸èƒ½åšæˆä¸€ä¸ªç±»ï¼Œæ‰€ä»¥åªèƒ½ç”¨åœ¨ä¸€äº›ç®€å•çš„å­˜å‚¨ï¼Œæ¯”å¦‚ç®€å•å˜é‡å’Œç©å®¶è®¾ç½®é‡Œï¼Œæ¯”å¦‚è·å¾—é‡‘å¸é’»çŸ³æ•°é‡å•Šï¼Œå¼€ä¸å¼€bgmå•Šï¼ˆå¼€äº†å°±setintä¸º1ï¼Œç„¶åæ¯æ¬¡è¿›æ¸¸æˆgetintåˆ¤æ–­æ˜¯ä¸æ˜¯1ï¼Œæ˜¯äº†å°±å¼€ï¼‰ä»€ä¹ˆçš„ã€‚å½“ç„¶å¦‚æœä½ ç¡¬è¦å­˜å‚¨ç©å®¶æ•°æ®ä¹Ÿä¸æ˜¯ä¸å¯ä»¥ï¼Œå°±æ˜¯æœ‰ç§æ‹¿æ°´æœåˆ€æ€ç‰›çš„æ„Ÿè§‰ï¼ˆ<del>åˆ«é—®æˆ‘ä¸ºä»€ä¹ˆä¸æ˜¯é¸¡åˆ€ï¼Œä½ è§è¿‡é¸¡åˆ€å—ï¼‰</del>ï¼Œä¸å¤ªå€¼å¾—å±äºæ˜¯ã€‚</p><p><strong>æ³¨æ„ï¼š</strong></p><p><strong>å› ä¸ºæ˜¯å­˜åœ¨æ–‡ä»¶é‡Œï¼Œæ‰€ä»¥ä½ Unityè°ƒè¯•ä¹Ÿæ˜¯è¿è¡Œäº†PlayerPrefsçš„ä»£ç é‡Œçš„ï¼Œæ‰€ä»¥åœ¨åœæ­¢è°ƒè¯•åPlayerPrefsçš„æ”¹å˜ä¸ä¼šå˜å›æ¥æ</strong></p><p>ï¼ˆé€šä¿—ä¸€ç‚¹å°±æ˜¯ä½ è°ƒè¯•æ—¶setintæŠŠ0æ”¹æˆ1ï¼Œç»ˆæ­¢è°ƒè¯•æ—¶é‚£ä¸ªå€¼è¿˜æ˜¯1è€Œä¸æ˜¯0è¾£ï¼Œè®²é‚£ä¹ˆå¤šå¹²å˜›ï¼‰</p><h2 id="åºåˆ—åŒ–å’Œååºåˆ—åŒ–"><a href="#åºåˆ—åŒ–å’Œååºåˆ—åŒ–" class="headerlink" title="åºåˆ—åŒ–å’Œååºåˆ—åŒ–"></a>åºåˆ—åŒ–å’Œååºåˆ—åŒ–</h2><p>æ¯ä¸ªå­—å•ç‹¬æˆ‘éƒ½è®¤è¯†ï¼Œå’‹è¿èµ·æ¥å°±ä¸è®¤è¯†äº†æï¼Ÿå®¹æˆ‘ç»†è¯´ï¼š</p><h3 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><h4 id="åºåˆ—åŒ–-Serialization-å’Œååºåˆ—åŒ–-Deserialization"><a href="#åºåˆ—åŒ–-Serialization-å’Œååºåˆ—åŒ–-Deserialization" class="headerlink" title="åºåˆ—åŒ–(Serialization)å’Œååºåˆ—åŒ–(Deserialization)"></a>åºåˆ—åŒ–(Serialization)å’Œååºåˆ—åŒ–(Deserialization)</h4><p>åœ¨Unityä¸­ï¼Œåºåˆ—åŒ–çš„æ¦‚å¿µä¸ºï¼š<strong>å°†[å¯¹è±¡çš„çŠ¶æ€ä¿¡æ¯]è½¬åŒ–ä¸º[Unityå¯ä»¥å‚¨å­˜çš„å½¢å¼]çš„è‡ªåŠ¨åŒ–å¤„ç†è¿‡ç¨‹</strong></p><p>é‚£ååºåˆ—åŒ–è‡ªç„¶æ˜¯ï¼š<strong>å°†[Unityå¯ä»¥å‚¨å­˜çš„å½¢å¼]è½¬åŒ–ä¸º[å¯¹è±¡çš„çŠ¶æ€ä¿¡æ¯]çš„è‡ªåŠ¨åŒ–å¤„ç†è¿‡ç¨‹</strong></p><p>ä»å¹¿ä¹‰ä¸Šæ¥è¯´ï¼Œ[å¯¹è±¡çš„çŠ¶æ€ä¿¡æ¯]å¯ä»¥è¢«è¯´æˆ[å¯¹è±¡]ï¼Œè€Œ[Unityå¯ä»¥å‚¨å­˜çš„å½¢å¼]å°±æ˜¯[å¯ä¼ è¾“çš„å­—èŠ‚åºåˆ—]ã€‚è¯´ç™½äº†ï¼Œåºåˆ—åŒ–å°±æ˜¯å°†Unityçš„æ–‡ä»¶æˆ–è€…è„šæœ¬ï¼ˆå¯¹è±¡çš„çŠ¶æ€ä¿¡æ¯ï¼‰è½¬åŒ–ä¸ºäºŒè¿›åˆ¶çš„å½¢å¼ï¼ˆä¹Ÿå°±æ˜¯ä¸€ç¾¤è¯»ä¸æ‡‚çš„æ•°å­—åŠ å­—æ¯ï¼‰ï¼Œå­˜å‚¨åœ¨æ•°æ®åº“ï¼Œå†…å­˜æˆ–è€…æ–‡ä»¶ä¸­ï¼ˆUnityå¯ä»¥å‚¨å­˜çš„å½¢å¼ï¼‰ï¼Œä¹Ÿå°±æ˜¯æ¸¸æˆé‡Œçš„â€œä¿å­˜æ¸¸æˆâ€æŒ‰é’®ï¼Œè€Œååºåˆ—åŒ–åˆ™æ˜¯â€œè¯»å–æ¸¸æˆâ€ã€‚å’Œå…¶ä»–çš„æ–¹æ³•ä¸åŒï¼Œè¿™äº›æ•°æ®ä¼šä»¥äºŒè¿›åˆ¶çš„å½¢å¼å­˜å‚¨åœ¨æ¸¸æˆçš„data.txté‡Œã€‚</p><p>åºåˆ—åŒ–æœ€ç®€å•çš„ä½¿ç”¨æ–¹å¼æ˜¯è®©è„šæœ¬å†…privateå˜é‡çš„å€¼åœ¨Inspectoré¢æ¿é‡Œæ˜¾ç¤ºå‡ºæ¥ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼ˆï¼Ÿï¼Ÿï¼Ÿï¼‰ï¼Œè„šæœ¬å†…çš„publicå˜é‡éƒ½ä¼šç»è¿‡åºåˆ—åŒ–å‡ºç°åœ¨inpectoré¢æ¿ä¸Šï¼Œè€Œprivateåˆ™ä¸ä¼šã€‚è€Œè¦æƒ³æ˜¾ç¤ºå‡ºæ¥ï¼Œå°±è¦åœ¨å‘½åä¸Šæ–¹åŠ ä¸Š<code>[SerializeField]</code>ï¼Œè¡¨ç¤ºå˜é‡å¯è¢«åºåˆ—åŒ–ï¼ˆç§ä»¥ä¸ºå…¶ä¸­åŸç†åº”è¯¥æ˜¯è®©Unityçš„Inspectoré¢æ¿ä¿å­˜æ•°æ®ï¼‰ã€‚å…·ä½“å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[SerializedField]</span><br><span class="line">private int i;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°†ä¼šä»‹ç»Unityä¸ºæ­¤ç‰¹åˆ¶çš„ä¸‰ä¸ªç±»ï¼Œå®ƒä»¬åˆ†åˆ«ä¸ºï¼š</p><h4 id="Fileç±»ï¼ŒFileStreamç±»å’ŒBinaryFormatterç±»"><a href="#Fileç±»ï¼ŒFileStreamç±»å’ŒBinaryFormatterç±»" class="headerlink" title="Fileç±»ï¼ŒFileStreamç±»å’ŒBinaryFormatterç±»"></a>Fileç±»ï¼ŒFileStreamç±»å’ŒBinaryFormatterç±»</h4><h5 id="Fileç±»"><a href="#Fileç±»" class="headerlink" title="Fileç±»"></a>Fileç±»</h5><p>æ–‡ä»¶ç±»ï¼Œå³ç”¨æ¥å¯¹æ–‡ä»¶è¿›è¡ŒåŸºæœ¬æ“ä½œï¼Œæ¯”å¦‚è¯´åˆ›å»ºã€å¤åˆ¶ã€å‰ªåˆ‡ã€æ‰“å¼€ç­‰ï¼Œå¯ä»¥ç›´æ¥èµ‹å€¼åˆ°åé¢çš„FileStreamç±»</p><p><strong>å¤ªé•¿ä¸çœ‹ç‰ˆï¼šæ“ä½œæ–‡ä»¶çš„</strong></p><p><strong>åœ¨ä½¿ç”¨è¯¥ç±»å‰ï¼Œè¯·æ³¨æ„ä½¿ç”¨<code>System.IO</code>çš„å‘½åç©ºé—´</strong>ï¼ˆIOè‚¯å®šæ˜¯input,outputè¾£ï¼‰,ä¹Ÿå°±æ˜¯ï¼š<code>using System.IO</code></p><h5 id="FileStreamç±»"><a href="#FileStreamç±»" class="headerlink" title="FileStreamç±»"></a>FileStreamç±»</h5><p>æ–‡ä»¶æµç±»ï¼Œå³ç”¨æ¥è¯»å–ã€å†™å…¥æ“ä½œç³»ç»Ÿæ–‡ä»¶çš„ï¼Œå¯ä»¥è¿›è¡Œè¯»å–ã€å†™å…¥ã€ä¿å­˜ã€å…³æ–‡ä»¶æµçš„åŠŸèƒ½ï¼Œå¯ä»¥æŠŠæ–‡ä»¶è½¬åŒ–ä¸ºå­—èŠ‚æµçš„å½¢å¼</p><p><strong>æ³¨æ„ï¼šå¹²å®Œæ´»è®°å¾—æŠŠæ–‡ä»¶æµå…³äº†ï¼ŒFileç±»å¯ä»¥ç›´æ¥èµ‹å€¼FileStreamç±»</strong></p><p><strong>åœ¨ä½¿ç”¨è¯¥ç±»å‰ï¼Œè¯·æ³¨æ„ä½¿ç”¨<code>System.IO</code>çš„å‘½åç©ºé—´</strong>ï¼ˆIOè‚¯å®šæ˜¯input,outputè¾£ï¼‰,ä¹Ÿå°±æ˜¯ï¼š<code>using System.IO</code></p><p>ç»¼ä¸Šæ‰€è¿°å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ–‡ä»¶çœ‹æˆåŒ…è£¹ï¼Œå¯¹åŒ…è£¹æœ¬èº«çš„æ“ä½œï¼Œæ¯”å¦‚åˆ›å»ºä¸ªåŒ…è£¹ï¼Œç§»åŠ¨ä¸ªåŒ…è£¹ä»€ä¹ˆçš„å°±ç”¨Fileç±»ï¼Œä½†æ˜¯å¦‚æœè¦å¯¹åŒ…è£¹é‡Œé¢çš„ä¸œè¥¿è¿›è¡Œæ“ä½œï¼Œé‚£å°±å¾—ä½¿ç”¨FileStreamäº†ã€‚</p><h5 id="BinaryFormatterç±»"><a href="#BinaryFormatterç±»" class="headerlink" title="BinaryFormatterç±»"></a>BinaryFormatterç±»</h5><p>Binaryçš„æ„æ€æ˜¯äºŒè¿›åˆ¶ï¼Œè€ŒFormatteråˆ™æ˜¯æ ¼å¼åŒ–ç¨‹åºï¼Œé‚£å¹²ä»€ä¹ˆè‡ªç„¶ä¸ç”¨æˆ‘è¯´äº†ï¼Œå°±æ˜¯<strong>ä»¥äºŒè¿›åˆ¶çš„å½¢å¼å¯¹å¯¹è±¡è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–</strong>ã€‚</p><p><strong>åœ¨ä½¿ç”¨è¯¥ç±»å‰ï¼Œè¯·æ³¨æ„ä½¿ç”¨<code>System.Runtime.Serialization.Formatters.Binary</code>çš„å‘½åç©ºé—´</strong>,ä¹Ÿå°±æ˜¯ï¼š<code>using System.Runtime.Serialization.Formatters.Binary</code></p><h3 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h3><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªc#è„šæœ¬å‘½åä¸ºSaveï¼ˆåå­—éšä¾¿å•¥éƒ½å¯ä»¥ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">[System.Serializable] //ç›´æ¥å‘Šè¯‰Unityè¿™ä¸ªç±»å¯è¢«åºåˆ—åŒ–</span><br><span class="line">public class Save //ä¸è¦MonoBehaviourï¼Œå› ä¸ºç›´æ¥ä½œä¸ºä¸€ä¸ªç±»ï¼Œä¸éœ€è¦æŒ‚ç‰©ä½“ä¸Š</span><br><span class="line">&#123;</span><br><span class="line">    public int coins;</span><br><span class="line">    public float playerPositionX;</span><br><span class="line">    public float playerPositionY;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¦ä¸€ä¸ªè„šæœ¬é‡Œå†™ä¸‹è¿™äº›æ–¹æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">using System.Runtime.Serialization.Formatters.Binary;</span><br><span class="line">using System.IO;</span><br><span class="line">//å‘½åç©ºé—´è‚¯å®šä¸æ­¢è¿™ä¹ˆå°‘ï¼Œå°±æ˜¯æ‰“å‡ºæ¥æé†’ä¸€ä¸‹</span><br><span class="line"></span><br><span class="line">public Save CreateSave()&#123; //åˆ›å»ºä¸€ä¸ªSaveå¯¹è±¡å­˜å‚¨å½“å‰æ¸¸æˆæ•°æ®</span><br><span class="line">    Save save=new Save();</span><br><span class="line">    save.Coins=GameManager.Instance.coins;</span><br><span class="line">    save.playerPositionX=player.transform.position.x;</span><br><span class="line">    save.playerPositionY=player.transform.postion.y;</span><br><span class="line">    return Save;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public void SaveBySerialization()&#123;</span><br><span class="line">    Save save=CreateSave();</span><br><span class="line">    //è·å–å½“å‰çš„æ¸¸æˆæ•°æ®å­˜åœ¨Saveå¯¹è±¡é‡Œ</span><br><span class="line">    BinaryFormatter bf=new BinaryFormatter();</span><br><span class="line">    //åˆ›å»ºä¸€ä¸ªäºŒè¿›åˆ¶å½¢å¼</span><br><span class="line">    FileStream  fs=File.Create(Application.persistentDataPath+&quot;/Data.yj&quot;);</span><br><span class="line">    //è¿™é‡ŒæŒ‡ä½¿ç”¨æŒä¹…è·¯å¾„åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æµå¹¶å°†å…¶ä¿å­˜åœ¨Data.yjé‡Œï¼ˆå…·ä½“åœ¨å“ªå°±ä¸æ‰“äº†ï¼Œåæ­£åˆ›å»ºäº†ï¼‰</span><br><span class="line">    //ç”±äºæŒä¹…è·¯å¾„åœ¨Windowsç³»ç»Ÿæ˜¯éšè—çš„ï¼Œæ‰€ä»¥æ— æ³•æ‰¾åˆ°Data.yjæœ¬èº«</span><br><span class="line">    //å¦‚æœæƒ³çœ‹åˆ°ï¼Œå¯ä»¥æ”¹æˆdataPath(å°±åƒä¸‹æ–‡jsonçš„ä»£ç é‡Œä¸€æ ·)</span><br><span class="line">    //æ–‡ä»¶åç¼€å¯ä»¥éšä¾¿æ”¹ï¼Œç”šè‡³æ˜¯è‡ªå®šä¹‰çš„ï¼ˆæ¯”å¦‚æˆ‘è¿™é‡Œç”¨äº†yjï¼‰</span><br><span class="line">    bf.Serialize(fs,save);</span><br><span class="line">    //å°†Saveå¯¹è±¡è½¬åŒ–ä¸ºå­—èŠ‚</span><br><span class="line">    fs.Close();</span><br><span class="line">    //æŠŠæ–‡ä»¶æµå…³äº†</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†åºåˆ—åŒ–ï¼ˆä¿å­˜ï¼‰çš„å…¨è¿‡ç¨‹ï¼š</p><p><strong>åˆ›å»ºä¸€ä¸ªäºŒè¿›åˆ¶æ ¼å¼åŒ–å¯¹è±¡-&gt;æ–°å»ºæ–‡ä»¶æµ-&gt;åºåˆ—åŒ–Saveå¯¹è±¡-&gt;å…³é—­æ–‡ä»¶æµ</strong></p><p>æ¥ä¸‹æ¥å°±æ˜¯è¯»å–ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">private void LoadByDeserialization()&#123;</span><br><span class="line">    if(File.Exists(Application.persistentDataPath+&quot;/Data.yj&quot;))</span><br><span class="line">    //åˆ¤æ–­æ–‡ä»¶æ˜¯å¦åˆ›å»º</span><br><span class="line">    &#123;</span><br><span class="line">        BinaryFormatter bf=new BinaryFormatter();</span><br><span class="line">        FileStream fs=File.Open(Application.persistentDataPath+&quot;/Data.yj&quot;,FileMode.Open);//æ‰“å¼€æ–‡ä»¶</span><br><span class="line">        Save save=bf.Deserialize(fs) as Save;</span><br><span class="line">//ååºåˆ—åŒ–å¹¶å°†æ•°æ®å‚¨å­˜è‡³saveï¼ˆå› ä¸ºè¿”å›å˜é‡ç±»å‹ä¸å¯¹ï¼Œæ‰€ä»¥è¦å¼ºåˆ¶è½¬æ¢ä¸ºSaveç±»</span><br><span class="line">        fs.Close();</span><br><span class="line">//å…³æ–‡ä»¶æµ</span><br><span class="line">        GameManager.Instance.coins=save.coins;</span><br><span class="line">        player.transform.position=new Vector2(save.playerPositionX,save.playerPositionY);</span><br><span class="line">//èµ‹å€¼</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        Debug.LogError(&quot;Data Not Found&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å°±è¿™æ ·ï¼Œä¸€ä¸ªç®€å•çš„æ¸¸æˆå­˜æ¡£å°±åšå¥½äº†ï¼Œè¿™äº›æ–¹æ³•å¯ä»¥æŒ‚è½½åœ¨æŒ‰é’®æˆ–è€…ç‰¹å®šåœºæ™¯ä¸Šï¼Œä½¿å¾—å¯ä»¥æ­£å¸¸è¿›è¡Œå­˜æ¡£è¯»æ¡£çš„æ“ä½œã€‚å¦‚æœä½ æƒ³å‚¨å­˜åœºæ™¯å†…çš„æ€ªç‰©æ•°æ®çš„è¯ï¼Œå»ºè®®ä½¿ç”¨vectorç±»å‹è¿›è¡Œå­˜å‚¨å‘¢ï¼Œæ¯”å¦‚è¯´ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">for(int i=0;i&lt;save.isDead.Count;i++)&#123;</span><br><span class="line">    if(GameManager.instance.enemies[i]==null)&#123;</span><br><span class="line">        if(!save.isDead[i])//å¦‚æœæ•Œäººåœ¨æˆ‘ä»¬ä¿å­˜ä¹‹åæ­»äº†</span><br><span class="line">        &#123;</span><br><span class="line">            float enemyPosX=save.enemyPositionX[i];</span><br><span class="line">            float enemyPosY=save.enemyPositionY[i];</span><br><span class="line">            Enemy newEnemy=Instantiate(enemyPrefab,new Vector2(enemyPosX,enemyPosY),Quaternion.identity);</span><br><span class="line">            GameManager.Instance.enemies[i]=newBat;</span><br><span class="line">            //æŠŠæœ¬è¯¥æ´»ç€çš„æ•Œäººæ•°æ®è¿›è¡Œå¡«å……</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            float enemyPosX=save.enemyPositionX[i];</span><br><span class="line">            float enemyPosY=save.enemyPositionY[i];</span><br><span class="line">            Enemy newEnemy=Instantiate(enemyPrefab,new Vector2(enemyPosX,enemyPosY),Quaternion.identity);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ–°å»ºçš„ç±»ä¹Ÿåº”è¯¥æ˜¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">[System.Serializable] //ç›´æ¥å‘Šè¯‰Unityè¿™ä¸ªç±»å¯è¢«åºåˆ—åŒ–</span><br><span class="line">public class Save //ä¸è¦MonoBehaviourï¼Œå› ä¸ºç›´æ¥ä½œä¸ºä¸€ä¸ªç±»ï¼Œä¸éœ€è¦æŒ‚ç‰©ä½“ä¸Š</span><br><span class="line">&#123;</span><br><span class="line">    public int coins;</span><br><span class="line">    public float playerPositionX;</span><br><span class="line">    public float playerPositionY;</span><br><span class="line">    </span><br><span class="line">    public List&lt;float&gt; enemyPositionX=new List&lt;float&gt;();</span><br><span class="line">    public List&lt;float&gt; enemyPositionY=new List&lt;float&gt;();</span><br><span class="line">    public List&lt;bool&gt; isDead=new List&lt;bool&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>åºåˆ—åŒ–å’Œååºåˆ—åŒ–çœ‹ä¼¼å¾ˆå¥½è§£å†³äº†å¤§é‡æ•°æ®å­˜å‚¨çš„é—®é¢˜ï¼Œä½†æ˜¯ä½ è¦æƒ³å•Šï¼Œåºåˆ—åŒ–ä»¥åçš„æ–‡ä»¶å…¨æ˜¯äºŒè¿›åˆ¶ï¼Œè¿™é¬¼ä¹Ÿçœ‹ä¸æ‡‚å•Šï¼ˆé™¤äº†è®¡ç®—æœºæï¼‰ï¼Œé‚£ä¿®æ”¹ä¹Ÿæ›´æ˜¯é—®é¢˜ã€‚é‚£æœ‰æ²¡æœ‰ä»€ä¹ˆåºåˆ—åŒ–ä»¥åå±äºä¸€ä¸ªäººèƒ½çœ‹æ‡‚çš„ä¸œè¥¿æï¼Ÿè¿™å°±è¦çœ‹ï¼š</p><h2 id="å¦ä¸€ç§åºåˆ—åŒ–æ–¹å¼â€”â€”JSON"><a href="#å¦ä¸€ç§åºåˆ—åŒ–æ–¹å¼â€”â€”JSON" class="headerlink" title="å¦ä¸€ç§åºåˆ—åŒ–æ–¹å¼â€”â€”JSON"></a>å¦ä¸€ç§åºåˆ—åŒ–æ–¹å¼â€”â€”JSON</h2><p>{json}ï¼Œæç€ä¸€çœ‹è¿˜ä»¥ä¸ºæ˜¯jvavscript(js)ï¼Œé‚£å®ƒå¦‚ä½•æ¥å®ç°å­˜æ¡£è¯»æ¡£å‘¢ï¼Ÿè¿˜æ˜¯ä»æ¦‚å¿µå…¥æ‰‹æŠŠ</p><h3 id="æ¦‚å¿µ-1"><a href="#æ¦‚å¿µ-1" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><h4 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h4><p>JSONï¼Œå…¨ç§°æ˜¯JavaScriptå¯¹è±¡è¡¨ç¤ºæ³•ï¼ˆJavaScript Object Notationï¼‰ï¼Œå®ƒä¸»è¦æ˜¯ç”¨æ¥åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯è¿›è¡Œäº¤äº’æ•°æ®çš„ï¼Œå®ƒå±äºè½»é‡çº§è¯­è¨€ã€‚å®ƒçš„æ ¼å¼ä»¥â€é”®å€¼å¯¹â€œçš„å½¢å¼ä½œä¸ºå±•ç¤ºï¼Œè€Œä¸”é”®çš„åå­—å¯ä»¥è‡ªå·±å®šä¹‰ï¼Œä¸ç†è§£çš„å¯ä»¥çœ‹çœ‹ä¸‹é¢ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var Save=&#123;<span class="comment">//å¤§æ‹¬å·è¡¨ç¤ºå¯¹è±¡</span></span><br><span class="line">    <span class="attr">&quot;coins&quot;</span>:<span class="number">10</span>,</span><br><span class="line">    <span class="attr">&quot;playerPositionX&quot;</span>:<span class="number">10.866</span>,</span><br><span class="line">    <span class="attr">&quot;playerPositionY&quot;</span>:<span class="number">-21</span>,</span><br><span class="line">    <span class="attr">&quot;isDead&quot;</span>:[<span class="literal">true</span>,<span class="literal">false</span>,<span class="literal">false</span>,<span class="literal">true</span>,<span class="literal">true</span>] <span class="comment">//ä¸­æ‹¬å·è¡¨ç¤ºæ•°ç»„</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>jsonç”±ä¸¤éƒ¨åˆ†æ„æˆï¼šä¸€ä¸ªæ˜¯é”®å(Key)ï¼Œä¹Ÿå°±æ˜¯å˜é‡çš„åå­—ï¼Œæ˜¯Stringç±»å‹çš„ï¼›å¦ä¸€ä¸ªå°±æ˜¯å€¼(value)ï¼Œå®ƒå¯ä»¥æ˜¯int,bool,float,æ•°ç»„,ç”šè‡³æ˜¯å¯¹è±¡ç±»å‹ã€‚å®ƒä»¬ç»„åˆåœ¨ä¸€èµ·ï¼Œä¹Ÿå°±æ˜¯ä¸Šæ–‡æ‰€è¯´çš„â€é”®å€¼å¯¹â€œ(Key Value Pair)ï¼Œæœ‰ç‚¹å­—å…¸å†…å‘³äº†å“ˆï¼ˆå­—å…¸ä¹Ÿæ˜¯é”®å€¼å¯¹å•Škoraï¼‰ã€‚è€Œjsonæ–‡ä»¶æœ¬èº«ä¹Ÿæ˜¯Stringç±»å‹çš„æ–‡æœ¬ã€‚</p><p>çœ‹åˆ°è¿™é‡Œä¹Ÿåº”è¯¥æ˜ç™½jsonå’Œjsçš„åŒºåˆ«äº†<del>ï¼ˆä½ è®¤çœŸçš„ï¼Ÿï¼Ÿï¼Ÿï¼‰</del>ï¼šJavaScriptæ˜¯ä¸€ç§ç¨‹åºè¯­è¨€ï¼Œè€Œjsonåˆ™æ˜¯ä¸€ç§æ•°æ®æ ¼å¼ï¼Œä¸€ç§è¯­æ³•ã€‚å› ä¸ºå®ƒæ²¡æœ‰ä½¿ç”¨ä»»ä½•å‡½æ•°æˆ–è€…å‘½ä»¤ï¼Œä»…ä»…æ˜¯ä»¥æ–‡å­—ä¸ºåŸºç¡€ï¼Œæ˜“äºé˜…è¯»å’Œç¼–å†™ï¼Œä½œä¸ºæ•°æ®äº¤æ¢è¯­è¨€æ˜¾ç„¶å¾ˆé€‚åˆã€‚è™½ç„¶JavaScripté‡Œè‡ªå¸¦æ–¹æ³•å¯ä»¥è®©jså’Œjsonäº’ç›¸è½¬åŒ–ï¼Œä½†æœ¬è´¨ä¸Šä¸¤è€…è¿˜æ˜¯ä¸å±äºä¸€ä¸ªä¸œè¥¿ã€‚</p><p>è™½ç„¶å¯ä»¥ä½¿ç”¨jså¯ä»¥å’Œjsonäº’ç›¸è½¬åŒ–ï¼Œä½†æ˜¯Unityçš„è¯­è¨€æ˜¯C#å•Šã€‚ã€‚ã€‚ä¸è¿‡ä¸ç”¨æ‹…å¿ƒï¼ŒUnityä¹Ÿæœ‰ç›¸åº”çš„æ–¹æ³•è®©jsonå¯ä»¥å’ŒC#ç›¸äº’è½¬åŒ–(JsonUtilityç±»)ã€‚è€Œä¸‹æ–‡ä¹Ÿæ˜¯é€šè¿‡è¿™ç§æ–¹å¼å®ç°çš„ã€‚</p><p><strong>æç¤ºï¼š</strong>å…¶å®å¯ä»¥é€šè¿‡åº“è¿›è¡Œjsonæ•°æ®çš„è§£æï¼Œæ¯”å¦‚.Netåº“çš„Json.Netå’ŒLitJson.dllã€‚ä¹‹æ‰€ä»¥ä½¿ç”¨JsonUtilityç±»æ˜¯å› ä¸ºå®ƒæ˜¯Unityè‡ªå¸¦çš„ï¼Œè€Œä¸”è§£ææ›´å¿«ï¼Œäº§ç”Ÿçš„åƒåœ¾æ›´å°‘ã€‚</p><h4 id="æµå†™å…¥ç±»-StreamWriterç±»"><a href="#æµå†™å…¥ç±»-StreamWriterç±»" class="headerlink" title="æµå†™å…¥ç±»(StreamWriterç±»)"></a>æµå†™å…¥ç±»(StreamWriterç±»)</h4><p>å’ŒFileStreamç±»å·®ä¸å¤šï¼Œä¹Ÿæ˜¯å¯¹ç³»ç»Ÿæ–‡ä»¶è¿›è¡Œå†™å…¥çš„ï¼ˆæ²¡æœ‰è¯»å–åŠŸèƒ½æï¼‰ï¼Œä½†æ˜¯FileStreamç±»è¯»å–çš„æ˜¯å­—èŠ‚æ•°ç»„ï¼Œé€‚ç”¨äºéæ–‡æœ¬æ–‡ä»¶ï¼Œæ‰€ä»¥ä¸å¤ªé€‚åˆè¯»å–Stringç±»å‹çš„JSONæ–‡ä»¶</p><p><strong>æ³¨æ„ï¼šå†™å®Œä¹Ÿè®°å¾—æŠŠæµå…³äº†</strong></p><h4 id="æµè¯»å–ç±»-StreamReaderç±»"><a href="#æµè¯»å–ç±»-StreamReaderç±»" class="headerlink" title="æµè¯»å–ç±»(StreamReaderç±»)"></a>æµè¯»å–ç±»(StreamReaderç±»)</h4><p>å’ŒFileStreamç±»å·®ä¸å¤šï¼Œä¹Ÿæ˜¯å¯¹ç³»ç»Ÿæ–‡ä»¶è¿›è¡Œè¯»å–çš„ï¼ˆæ²¡æœ‰å†™å…¥åŠŸèƒ½æï¼‰ï¼Œä½†æ˜¯FileStreamç±»è¯»å–çš„æ˜¯å­—èŠ‚æ•°ç»„ï¼Œé€‚ç”¨äºéæ–‡æœ¬æ–‡ä»¶ï¼Œæ‰€ä»¥ä¸å¤ªé€‚åˆè¯»å–Stringç±»å‹çš„JSONæ–‡ä»¶</p><p><strong>æ³¨æ„ï¼šå†™å®Œä¹Ÿè®°å¾—æŠŠæµå…³äº†</strong></p><p><del><em>å°±æ˜¯å¤åˆ¶ç²˜è´´æ”¹äº†çš„ï¼Œç•¥ç•¥ç•¥</em></del></p><h3 id="åº”ç”¨-1"><a href="#åº”ç”¨-1" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//ä¸éœ€è¦åŠ åˆ«çš„å‘½åç©ºé—´ï¼Œç®€ç›´çˆ½æ­»(bushiprivate void SaveByJSON()&#123;Save save= CreateSave();    //åˆ›å»ºä¸€ä¸ªSaveå®ä¾‹å­˜å‚¨æ¸¸æˆæ•°æ®(CreateSaveå‡½æ•°åœ¨ä¸Šé¢)    String JsonString=JsonUtility.ToJson(save);    //å°†å¯¹è±¡saveè½¬åŒ–ä¸ºjsonå­—ç¬¦ä¸²    //ä¸Šé¢è¯´äº†Jsonæ˜¯stringç±»å‹ï¼Œæ‰€ä»¥å‘½åstring    StreamWriter sw=new StreamWriter(Application.dataPath+&quot;/Data.yj&quot;);//persistentDataPathæ˜¯éšè—æ–‡ä»¶çš„ï¼Œæ‰€ä»¥ä½ æ‰¾ä¸åˆ°Data.yjçš„æ‰€åœ¨åœ°ï¼Œ//è€ŒdataPathå°±ä¸ä¼šéšè—ï¼ŒåŒæ—¶æ–‡ä»¶åç¼€ä¹Ÿå¯ä»¥ä¹±å–    sw.Write(JsonString);//å°†jsonå­—ç¬¦ä¸²å†™å…¥æµå‚æ•°    sw.Close();//æŠŠæµå…³äº†&#125;private void LoadByJSON()&#123;    if(File.Exists(Application.dataPath+&quot;Data.yj&quot;))    //åˆ¤æ–­æ–‡ä»¶æ˜¯å¦åˆ›å»º    &#123;        StreamReader sr=new StreamReader(Application.dataPath+&quot;/Data.yj&quot;);        //ä»æµä¸­è¯»å–å­—ç¬¦ä¸²        String JsonString=sr.ReadToEnd();//ReadToEnd()æ–¹æ³•å¯ä»¥è¯»å–ä»æµå½“å‰ä½ç½®åˆ°ç»“å°¾çš„æ‰€æœ‰å­—ç¬¦//è¿˜æœ‰Read()æ–¹æ³•ï¼Œä½†æ˜¯åªè¯»äº†ä¸€ä¸ªå­—ç¬¦ï¼Œè¿˜æœ‰æ›´å¤šæ–¹æ³•ææ‡’å¾—æ‰“äº†        sr.Close();//æŠŠæµå…³äº†        Save save=JsonUtility.FromJson&lt;Save&gt;(JsonString);//è¯¥æ–¹æ³•å±äºæ³›å‹æ–¹æ³•Tï¼Œéœ€è¦ç»™å‡ºæ˜ç¡®çš„ç±»å‹å®šä¹‰ï¼Œæ‰€ä»¥è¦å†™&lt;Save&gt;        GameManager.Instance.coins=save.coins;        player.transform.position=new Vector2(save.playerPosition.x,save.playerPositionY);        //å±äºæ˜¯å¸¸è§„æ–¹å¼äº†    &#125;    else&#123;        Debug.LogError(&quot;File Not Found.&quot;);    &#125;&#125;</span><br></pre></td></tr></table></figure><p>å°±è¿™æ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨jsonå®Œæˆäº†æ¸¸æˆçš„å­˜æ¡£å’Œè¯»æ¡£æ“ä½œ</p><h5 id="å°è´´å£«ï¼š"><a href="#å°è´´å£«ï¼š" class="headerlink" title="å°è´´å£«ï¼š"></a>å°è´´å£«ï¼š</h5><p>jsonæ–¹æ³•é‡Œçš„æ³›å‹å’Œå¼ºåˆ¶è½¬æ¢å±äºä¸¤ç äº‹ï¼Œå‰è€…æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥æ»¡è¶³å¤šä¸ªç±»å‹çš„å®ç°(ä½†æ˜¯è¦ä½¿ç”¨&lt;&gt;æ ‡æ˜ç±»å‹)è€Œåè€…åªèƒ½å®Œæˆä¸€ä¸ªç±»å‹ï¼Œæ‰€ä»¥éœ€è¦åœ¨å‰é¢åŠ æ‹¬å·ï¼Œæˆ–è€…ä½¿ç”¨aså¯¹é”™è¯¯çš„ç±»å‹è¿›è¡Œå¼ºåˆ¶è½¬æ¢</p><h3 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>jsonçœ‹ä¼¼å®Œç¾çš„è§£å†³äº†æ–‡ä»¶å¯è¯»æ€§çš„é—®é¢˜ï¼ˆå¦‚æœæˆ‘ä»¬æ‰“å¼€æ–‡ä»¶ï¼Œçœ‹åˆ°çš„ä¾¿æ˜¯jsonæœ¬æ¥çš„æ–‡æœ¬æ ·å¼ï¼‰ï¼Œä½†æ˜¯jsonèƒŒåè¿˜æ˜¯æœ‰ç€ç¼ºç‚¹ï¼šå½“åœ¨äººæœºéƒ½éœ€è¦è¯†åˆ«æ•°æ®æ—¶ï¼ˆæ¯”å¦‚è¯´é…ç½®æ–‡ä»¶ï¼‰ï¼Œjsonçš„å¯è¯»æ€§ä¹Ÿä¼šå˜å¾—å·®ï¼Œå¦‚æœä½ è¦å‚¨å­˜å¤æ‚åœºæ™¯ï¼Œæ¯”å¦‚æ ‘çš„åæ ‡ï¼Œæ¯”å¦‚è‰çš„åæ ‡ï¼Œé‚£ä¸€å †å †çš„æ•°ç»„è¡¨ç¤ºçš„åæ ‡è‚¯å®šçœ‹å¾—ä½ æƒ³è¦åç‰¢ã€‚åœ¨è¿™é‡Œæé†’ä¸€ä¸‹ï¼Œå½“ä½ æ‰“å¼€jsonæ–‡ä»¶æ—¶ï¼Œé‡Œé¢å¯ä¸ä¼šæœ‰æ¢è¡Œç¬¦ä¸€è¡Œè¡Œç»™ä½ æ‰“çš„æ¸…æ¥šï¼Œè€Œæ˜¯å…¨éƒ¨æ‹§æˆäº†ä¸€å›¢ã€‚é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ–‡ä»¶ä¿å­˜ç±»å‹ï¼Œæ—¢å¯ä»¥åœ¨Unityé‡Œä¿å­˜å’Œè¯»å–æ•°æ®ï¼Œä¹Ÿå¯ä»¥å…·æœ‰è‰¯å¥½çš„ç»“æ„æ€§å’Œæè¿°æ€§å‘¢ï¼Ÿé‚£å°±æ˜¯æœ€åä¸€ä¸ªæˆ‘è¦ä»‹ç»çš„æœ€åä¸€ä¸ªç±»å‹ï¼š</p><h2 id="XML"><a href="#XML" class="headerlink" title="XML"></a>XML</h2><h3 id="æ¦‚å¿µ-2"><a href="#æ¦‚å¿µ-2" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h3><h4 id="XML-1"><a href="#XML-1" class="headerlink" title="XML"></a>XML</h4><p>XMLï¼Œæ„æ€æ˜¯å¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼ˆeXtensible Markup Languageï¼‰ã€‚ä¸ºä»€ä¹ˆä¸å«EMLå‘¢ï¼Ÿå› ä¸ºè¿™æ ·å’Œemlï¼ˆå‘é‚®ä»¶çš„æ–‡ä»¶åç¼€æ ¼å¼ï¼‰é‡åäº†ã€‚ã€‚ã€‚</p><p>å’³å’³ï¼Œè¨€å½’æ­£ä¼ ï¼Œå®ƒä¸“é—¨è¢«è®¾è®¡ç”¨æ¥ç»“æ„åŒ–â€œå­˜å‚¨â€å’Œâ€ä¼ è¾“â€œæ•°æ®æˆ–è€…ä¿¡æ¯ã€‚å®ƒå¯ä»¥åœ¨ä¸å…¼å®¹çš„ç³»ç»Ÿä¹‹é—´è½»æ¾äº¤æ¢æ•°æ®ï¼Œç®€åŒ–æ•°æ®å…±äº«ã€‚è€Œä¸”ï¼ŒXMLæ•°æ®ä»¥çº¯æ–‡æœ¬æ–¹å¼è¿›è¡Œå­˜å‚¨ï¼ˆæœ¬è´¨å°±æ˜¯å­—ç¬¦ä¸²ï¼‰ï¼Œå¯ä»¥ç»™ä»»ä½•é˜…è¯»è®¾å¤‡ä½¿ç”¨ã€‚</p><p>æœ‰äº›äººå¬ç€å¯èƒ½è§‰å¾—ï¼šè¿™ä¸å°±æ˜¯htmlğŸï¼Ÿäº‹å®ä¸Šä¸¤è€…ç¡®å®æ˜¯æœ‰åŒºåˆ«çš„ï¼šhtmlä¸»è¦æ˜¾ç¤ºç½‘ç«™ä¸Šçš„å†…å®¹ï¼ˆæ–‡å­—ã€å›¾ç‰‡ç­‰ï¼‰ï¼Œäº‹å®ä¸Šï¼Œæˆ‘ä»¬æ–‡ç« ä¸€å¼€å¤´ç½‘æ˜“äº‘éŸ³ä¹æ”¾çš„çœŸå¤œçš„æ­Œï¼ˆ\çœŸå¤œ/\çœŸå¤œ/\çœŸå¤œ/\çœŸå¤œ/\çœŸå¤œ/\çœŸå¤œ/ï¼‰<del>ï¼ˆçªå‘æ¶ç–¾.jpgï¼‰</del>å°±æ˜¯é€šè¿‡htmlå®ç°çš„ï¼š</p><p>é˜¿å·´<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=1399789328&auto=1&height=66"></iframe>é˜¿å·´</p><p>åœ¨ä¸€ä¸ªç½‘ç«™ä¸­ï¼ŒHTMLè´Ÿè´£ç½‘é¡µå†…å®¹çš„æ˜¾ç¤ºï¼ŒCSSè´Ÿè´£å†…å®¹çš„é¢œè‰²å’Œæ’ç‰ˆï¼Œjavascriptè´Ÿè´£è¿›è¡Œä¸€äº›äº¤äº’åŠŸèƒ½çš„å®ç°ã€‚ï¼ˆè¿™äº›æ˜¯å‰ç«¯çš„çŸ¥è¯†äº†å±äºæ˜¯ï¼‰</p><p>è€ŒXMLç›¸æ¯”äºHTMLï¼ŒXMLæ›´åœ¨æ„é‡Œé¢å­˜å‚¨çš„ä¿¡æ¯ã€‚æ¯”å¦‚è¯´XMLé‡Œé¢çš„æ ‡ç­¾å¯ä»¥è‡ªå®šä¹‰ï¼Œè€ŒHTMLéƒ½æ˜¯é¢„å…ˆå®šä¹‰å¥½çš„ï¼Œæ‰€ä»¥XMLæ›´èƒ½èƒœä»»è¿™ä¸ªå­˜æ¡£çš„èŒèƒ½ã€‚</p><p><strong>æ¥ä¸‹æ¥å°±æœ‰ç‚¹é‡è¦äº†ï¼š</strong></p><p>ä¸ºä»€ä¹ˆæˆ‘ä»¬è¯´XMLç›¸æ¯”äºjsonæ›´å…·æœ‰ç»“æ„æ€§å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºXMLä¸­çš„æ¯ä¸ªå…ƒç´ å½¢æˆäº†ä¸€ä¸ªæ–‡æ¡£æ ‘ã€‚æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªç©å®¶çš„æ ¹èŠ‚ç‚¹æˆ–è€…æ•Œäººçš„æ ¹èŠ‚ç‚¹ï¼Œç„¶åæŠŠè¿™äº›å¯¹è±¡åº”è¯¥æ‹¥æœ‰çš„å˜é‡é€šè¿‡AppendChildçš„æ–¹å¼é™„å½•åˆ°æ ¹èŠ‚ç‚¹ä¸Šã€‚è¿™æ ·äººä»¬æƒ³è¦çœ‹ç©å®¶çš„æ•°æ®ï¼Œåªè¦æ‰¾åˆ°ç©å®¶çš„èŠ‚ç‚¹ä¸€ä¸ªä¸ªçœ‹å°±å¯ä»¥äº†ï¼Œè€Œä¸è¦åƒjsonä¸€æ ·æŒ¤åœ¨ä¸€èµ·ï¼Œéš¾ä»¥åˆ†è¾¨ã€‚ä¸‹é¢åº”ç”¨é‡Œæˆ‘æ‰‹æ‰“çš„XMLåº”è¯¥å¯ä»¥ä½“ç°è¿™ä¸€ç‚¹ã€‚</p><h4 id="XmlDocumentç±»"><a href="#XmlDocumentç±»" class="headerlink" title="XmlDocumentç±»"></a>XmlDocumentç±»</h4><p>ç”¨æ¥ä¿å­˜ï¼ŒåŠ è½½å’Œè§£æXMLæ–‡ä»¶ï¼Œé€šè¿‡è¿™ä¸ªç±»å¯ä»¥å¯¹xmlæ–‡ä»¶è¿›è¡Œåˆ›å»ºã€ä¿å­˜ã€è¯»å–ã€æ·»åŠ ä»¥åŠåˆ é™¤ã€‚</p><p>ä¸ä»…å¦‚æ­¤ï¼Œè¿™ä¸ªç±»è¿˜æœ‰ä¸€ä¸ªé™æ€æ–¹æ³•ï¼š<code>xmlDocument.CreateElement(&quot;node&quot;);</code>å®ƒå¯ä»¥åœ¨xmlæ–‡æ¡£ä¸­åˆ›å»ºä¸€ä¸ªâ€œå…ƒç´ èŠ‚ç‚¹â€ï¼ˆåå­—å½“ç„¶æ˜¯è‡ªå®šä¹‰çš„ï¼Œä¹Ÿå°±æ˜¯æ ‡ç­¾ï¼‰ï¼Œ</p><p><strong>æ³¨æ„ï¼šä½¿ç”¨XmlDocumentç±»å‰éœ€è¦å¼•å…¥<code>System.Xml</code>å‘½åç©ºé—´å“Ÿ~</strong></p><h3 id="åº”ç”¨-2"><a href="#åº”ç”¨-2" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">using System.Xml; //è¿˜æ˜¯æé†’ä¸€ä¸‹private void SaveByXML()&#123;    Save save=CreateSave();    XmlDocument xmlDocument=new XmlDocument();        #region CreateXML elements            XmlElement root=XmlDocument.CreateElement(&quot;Save&quot;);    //åˆ›å»ºä¸€ä¸ªå‚æ•°åä¸º&quot;Save&quot;çš„xmlå…ƒç´ ï¼Œè¿™ä¸ªå…ƒç´ åå­—å«root    //è¿™ä¹ˆå–åœ¨è„šæœ¬é‡Œå°±æ›´å¥½ç†è§£äº†    root.SetAttribute(&quot;FileName&quot;,&quot;File_01&quot;);        XmlElement coinElement=xmlDocument.CreateElement(&quot;Coins&quot;);    coinElement.InnerText=save.coins.ToString();    //åˆ›å»ºé‡‘å¸ä¿å­˜çš„å…ƒç´ ï¼Œå¹¶å°†é‡‘å¸æ•°ä»¥å­—ç¬¦ä¸²å½¢å¼å¯¼å…¥    root.AppendChild(coinElement);    //å°†coinElementè¿™ä¸€å…ƒç´ é™„å½•è‡³æ ¹èŠ‚ç‚¹rootä¸Š        XmlElement playerPositionXElement=xmlDocument.CreateElement(&quot;PlayerPositionX&quot;);    playerPositionXElement.InnerText=save.playerPositionX.ToString();    root.AppendChild(playerPositionXElement);    //æ¥ä¸‹æ¥å°±æ˜¯é‡å¤æ­¥éª¤ï¼šåˆ›å»ºèŠ‚ç‚¹ã€å‚¨å­˜æ•°æ®ã€å°†èŠ‚ç‚¹é™„å½•è‡³æ ¹èŠ‚ç‚¹        XmlElement playerPositionYElement=xmlDocument.CreateElement(&quot;PlayerPositionY&quot;);    playerPositionYElement.InnerText=save.playerPositionY.ToString();    root.AppendChild(playerPositionYElement);        #endregion    xmlDocument.AppendChild(root);    //æœ€åè¦æŠŠæ ¹èŠ‚ç‚¹é™„å½•åœ¨æ–‡ä»¶ä¸Šï¼Œä»¥ä¾¿äºæ–‡ä»¶å¯ä»¥ä¿å­˜        xmlDocument.Save(Application.dataPath+&quot;DataXML.yj&quot;);    //æŠŠæ•°æ®ä¿å­˜åœ¨æ–‡ä»¶â€œDataXML.yjâ€é‡Œ    if(File.Exists(Application.dataPath+&quot;DataXML.yj&quot;))&#123;        Debug.Log(&quot;XML FILE SAVED&quot;);    &#125;&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œå¦‚æœä½ ä¿å­˜äº†å¹¶ä¸”æ‰“å¼€äº†DataXML.yjï¼Œé‡Œé¢ä¼šæ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Save</span> <span class="attr">FileName</span>=<span class="string">&quot;File_01&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">Coins</span>&gt;</span>20<span class="tag">&lt;/<span class="name">Coins</span>&gt;</span>    <span class="tag">&lt;<span class="name">PlayerPositionX</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">PlayerPositionX</span>&gt;</span>    <span class="tag">&lt;<span class="name">PlayerPositionY</span>&gt;</span>-6<span class="tag">&lt;/<span class="name">PlayerPositionY</span>&gt;</span><span class="tag">&lt;/<span class="name">Save</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä»è¿™é‡Œæˆ‘ä»¬å°±èƒ½çœ‹å¾—å¾ˆæ¸…æ¥šäº†ï¼šåœ¨rootèŠ‚ç‚¹ï¼ˆåå­—è¢«æˆ‘ä»¬å‘½åä¸ºSaveï¼‰ä¸‹æœ‰ä¸‰ä¸ªå­èŠ‚ç‚¹ï¼šCoinsã€PlayerPositionXã€PlayerPositionYï¼Œå®ƒä»¬éƒ½åµŒå¥—åœ¨äº†Saveè¿™ä¸ªæ ¹èŠ‚ç‚¹ä¸‹ã€‚ç›¸ä¿¡é€šè¿‡è¿™ä¸ªæ›´èƒ½ç†è§£XMLæ–‡ä»¶çš„ä¼˜è¶Šç»“æ„æ€§äº†ã€‚</p><p>æ¥ä¸‹æ¥å°±æ˜¯è¯»å–ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private void LoadByXML()&#123;    if(File.Exists(Application.dataPath+&quot;/DataXML.yj&quot;))    &#123;        Save save=new Save();                XmlDocument xmlDocument=new XmlDocument();        xmlDocument.Load(Applicatiom.dataPath+&quot;/DataXML.yj&quot;);        //åˆ›å»ºå¹¶è¯»å–ä¿å­˜çš„XMLæ–‡ä»¶        XmlNodeList coins=xmlDocument.GetElementsByTagName(&quot;Coins&quot;);        //å¯»æ‰¾æ ‡ç­¾åç§°æ¥æ‰¾åˆ°ä¿å­˜åœ¨æ–‡ä»¶é‡Œçš„é‡‘å¸æ•°        int coincount=int.Parse(coins[0].InnerText);        //MARKER ä¸ºä»€ä¹ˆæ˜¯[0]å‘¢ï¼Ÿå› ä¸ºå¦‚æœæ ‡ç­¾åä¸ºCoinsçš„æœ‰å¾ˆå¤šçš„è¯ï¼Œå°±ä¼šé‡å¤        //æ‰€ä»¥è¿”å›çš„æ˜¯Listé›†åˆç±»å‹ï¼Œç¬¬ä¸€ä¸ªä¸º[0]ï¼Œç¬¬äºŒä¸ªä¸º[1]        //å°†Stringç±»çš„é‡‘å¸æ•°é€šè¿‡Parseè½¬åŒ–ä¸ºintå¹¶å­˜è¿›å˜é‡é‡Œ        save.coins=coincount;        XmlNodeList positionX=xml.DocumentXGetElementsByTagName(&quot;positionX&quot;);        float positionXcount=float.Parse(positionX[0].InnerText);        save.playerPositionX=positionXcount;                XmlNodeList positionY=xml.Document.GetElementsByTagName(&quot;positionY&quot;);        float positionYcount=float.Parse(positionY[0].InnerText);        save.playerPositionY=positionYcount;                GameManager.instance.coins=save.coins;        player.transform.position=new Vector2(save.playerPositionX,save.playerPositionY);    &#125;    else    &#123;        Debug.LogError(&quot;NOT FOUND FILE&quot;);    &#125;&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·çœ‹XMLå¯èƒ½è¿˜ä¸å¤ªæ¸…æ¥šï¼Œæ‰€ä»¥æˆ‘æ‰“ç®—åœ¨æŠŠæ•Œäººçš„æ•°æ®ä¹Ÿä¿å­˜åœ¨XMLé‡Œé¢ï¼Œè¿™æ ·å°±å¾—æ”¹æˆï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">using System.Xml; //è¿˜æ˜¯æé†’ä¸€ä¸‹private void SaveByXML()&#123;    Save save=CreateSave();    XmlDocument xmlDocument=new XmlDocument();        #region CreateXML elements            XmlElement root=XmlDocument.CreateElement(&quot;Save&quot;);    //åˆ›å»ºä¸€ä¸ªå‚æ•°åä¸º&quot;Save&quot;çš„xmlå…ƒç´ ï¼Œè¿™ä¸ªå…ƒç´ åå­—å«root    //è¿™ä¹ˆå–åœ¨è„šæœ¬é‡Œå°±æ›´å¥½ç†è§£äº†    root.SetAttribute(&quot;FileName&quot;,&quot;File_01&quot;);        XmlElement coinElement=xmlDocument.CreateElement(&quot;Coins&quot;);    coinElement.InnerText=save.coins.ToString();    //åˆ›å»ºé‡‘å¸ä¿å­˜çš„å…ƒç´ ï¼Œå¹¶å°†é‡‘å¸æ•°ä»¥å­—ç¬¦ä¸²å½¢å¼å¯¼å…¥    root.AppendChild(coinElement);    //å°†coinElementè¿™ä¸€å…ƒç´ é™„å½•è‡³æ ¹èŠ‚ç‚¹rootä¸Š        XmlElement playerPositionXElement=xmlDocument.CreateElement(&quot;PlayerPositionX&quot;);    playerPositionXElement.InnerText=save.playerPositionX.ToString();    root.AppendChild(playerPositionXElement);    //æ¥ä¸‹æ¥å°±æ˜¯é‡å¤æ­¥éª¤ï¼šåˆ›å»ºèŠ‚ç‚¹ã€å‚¨å­˜æ•°æ®ã€å°†èŠ‚ç‚¹é™„å½•è‡³æ ¹èŠ‚ç‚¹        XmlElement playerPositionYElement=xmlDocument.CreateElement(&quot;PlayerPositionY&quot;);    playerPositionYElement.InnerText=save.playerPositionY.ToString();    root.AppendChild(playerPositionYElement);        XmlElement enemy,enemyPositionX,enemyPositionY,isDead;    for(int i=0;i&lt;save.enemyPositionX.Count;i++)&#123;        enemy=xmlDocument.CreateElement(&quot;Enemy&quot;);        enemyPositionX=xmlDocument.CreateElement(&quot;EnemyPositionX&quot;);        enemyPositionY=xmlDocument.CreateElement(&quot;EnemyPositionY&quot;);        isDead=xmlDocument.CreateElement(&quot;IsDead&quot;);        enemyPositionX.InnerText=save.enemyPositionX[i].ToString();        enemyPositionY.InnerText=save.enemyPositionY[i].ToString();        isDead.InnerText=save.isDead[i].ToString();        enemy.AppendChild(enemyPositionX);        enemy.AppendChild(enemyPositionY);        enemy.AppendChild(isDead);        root.AppendChild(enemy);    &#125;        #endregion    xmlDocument.AppendChild(root);    //æœ€åè¦æŠŠæ ¹èŠ‚ç‚¹é™„å½•åœ¨æ–‡ä»¶ä¸Šï¼Œä»¥ä¾¿äºæ–‡ä»¶å¯ä»¥ä¿å­˜        xmlDocument.Save(Application.dataPath+&quot;DataXML.yj&quot;);    //æŠŠæ•°æ®ä¿å­˜åœ¨æ–‡ä»¶â€œDataXML.yjâ€é‡Œ    if(File.Exists(Application.dataPath+&quot;DataXML.yj&quot;))&#123;        Debug.Log(&quot;XML FILE SAVED&quot;);    &#125;&#125;</span><br></pre></td></tr></table></figure><p>è€ŒXMLæ–‡æ¡£ä¹Ÿä¼šå˜æˆè¿™ä¸ªæ ·å­ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Save</span> <span class="attr">FileName</span>=<span class="string">&quot;File_01&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">Coins</span>&gt;</span>20<span class="tag">&lt;/<span class="name">Coins</span>&gt;</span>    <span class="tag">&lt;<span class="name">PlayerPositionX</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">PlayerPositionX</span>&gt;</span>    <span class="tag">&lt;<span class="name">PlayerPositionY</span>&gt;</span>-6<span class="tag">&lt;/<span class="name">PlayerPositionY</span>&gt;</span>    <span class="tag">&lt;<span class="name">Enemy</span>&gt;</span>        <span class="tag">&lt;<span class="name">EnemyPositionX</span>&gt;</span>-2.1<span class="tag">&lt;/<span class="name">EnemyPositionX</span>&gt;</span>        <span class="tag">&lt;<span class="name">EnemyPositionY</span>&gt;</span>2<span class="tag">&lt;/<span class="name">EnemyPositionY</span>&gt;</span>        <span class="tag">&lt;<span class="name">IsDead</span>&gt;</span>True<span class="tag">&lt;/<span class="name">IsDead</span>&gt;</span>    <span class="tag">&lt;/<span class="name">Enemy</span>&gt;</span>    <span class="tag">&lt;<span class="name">Enemy</span>&gt;</span>        <span class="tag">&lt;<span class="name">EnemyPositionX</span>&gt;</span>-2.1<span class="tag">&lt;/<span class="name">EnemyPositionX</span>&gt;</span>        <span class="tag">&lt;<span class="name">EnemyPositionY</span>&gt;</span>2<span class="tag">&lt;/<span class="name">EnemyPositionY</span>&gt;</span>        <span class="tag">&lt;<span class="name">IsDead</span>&gt;</span>False<span class="tag">&lt;/<span class="name">IsDead</span>&gt;</span>    <span class="tag">&lt;/<span class="name">Enemy</span>&gt;</span>    <span class="tag">&lt;<span class="name">Enemy</span>&gt;</span>        <span class="tag">&lt;<span class="name">EnemyPositionX</span>&gt;</span>-0.1<span class="tag">&lt;/<span class="name">EnemyPositionX</span>&gt;</span>        <span class="tag">&lt;<span class="name">EnemyPositionY</span>&gt;</span>5<span class="tag">&lt;/<span class="name">EnemyPositionY</span>&gt;</span>        <span class="tag">&lt;<span class="name">IsDead</span>&gt;</span>True<span class="tag">&lt;/<span class="name">IsDead</span>&gt;</span>    <span class="tag">&lt;/<span class="name">Enemy</span>&gt;</span>    <span class="tag">&lt;<span class="name">Enemy</span>&gt;</span>        <span class="tag">&lt;<span class="name">EnemyPositionX</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">EnemyPositionX</span>&gt;</span>        <span class="tag">&lt;<span class="name">EnemyPositionY</span>&gt;</span>2<span class="tag">&lt;/<span class="name">EnemyPositionY</span>&gt;</span>        <span class="tag">&lt;<span class="name">IsDead</span>&gt;</span>False<span class="tag">&lt;/<span class="name">IsDead</span>&gt;</span>    <span class="tag">&lt;/<span class="name">Enemy</span>&gt;</span>    <span class="tag">&lt;<span class="name">Enemy</span>&gt;</span>        <span class="tag">&lt;<span class="name">EnemyPositionX</span>&gt;</span>-21<span class="tag">&lt;/<span class="name">EnemyPositionX</span>&gt;</span>        <span class="tag">&lt;<span class="name">EnemyPositionY</span>&gt;</span>20<span class="tag">&lt;/<span class="name">EnemyPositionY</span>&gt;</span>        <span class="tag">&lt;<span class="name">IsDead</span>&gt;</span>False<span class="tag">&lt;/<span class="name">IsDead</span>&gt;</span>    <span class="tag">&lt;/<span class="name">Enemy</span>&gt;</span><span class="tag">&lt;/<span class="name">Save</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™æ ·çœ‹èµ·æ¥ç¡®å®å°±å¾ˆèˆ’é€‚äº†(ç›¸æ¯”äºjsonæ–‡ä»¶)</p><p>åœ¨è¯»å–ç¯èŠ‚ä¹Ÿè¦åŠ ä¸€ç‚¹ä¸œè¥¿ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private void LoadByXML()&#123;    if(File.Exists(Application.dataPath+&quot;/DataXML.yj&quot;))    &#123;        Save save=new Save();                XmlDocument xmlDocument=new XmlDocument();        xmlDocument.Load(Applicatiom.dataPath+&quot;/DataXML.yj&quot;);        //åˆ›å»ºå¹¶è¯»å–ä¿å­˜çš„XMLæ–‡ä»¶        XmlNodeList coins=xmlDocument.GetElementsByTagName(&quot;Coins&quot;);        //å¯»æ‰¾æ ‡ç­¾åç§°æ¥æ‰¾åˆ°ä¿å­˜åœ¨æ–‡ä»¶é‡Œçš„é‡‘å¸æ•°        int coincount=int.Parse(coins[0].InnerText);        //MARKER ä¸ºä»€ä¹ˆæ˜¯[0]å‘¢ï¼Ÿå› ä¸ºå¦‚æœæ ‡ç­¾åä¸ºCoinsçš„æœ‰å¾ˆå¤šçš„è¯ï¼Œå°±ä¼šé‡å¤        //æ‰€ä»¥è¿”å›çš„æ˜¯Listé›†åˆç±»å‹ï¼Œç¬¬ä¸€ä¸ªä¸º[0]ï¼Œç¬¬äºŒä¸ªä¸º[1]        //å°†Stringç±»çš„é‡‘å¸æ•°é€šè¿‡Parseè½¬åŒ–ä¸ºintå¹¶å­˜è¿›å˜é‡é‡Œ        save.coins=coincount;        XmlNodeList positionX=xml.DocumentXGetElementsByTagName(&quot;positionX&quot;);        float positionXcount=float.Parse(positionX[0].InnerText);        save.playerPositionX=positionXcount;                XmlNodeList positionY=xml.Document.GetElementsByTagName(&quot;positionY&quot;);        float positionYcount=float.Parse(positionY[0].InnerText);        save.playerPositionY=positionYcount;        if(enemy.Count!=0)&#123;            for(int i=0;i&lt;enemy.Count;i++)&#123;                XmlNodeList enemyPositionX=xml.Document.GetElementsByTagName(&quot;EnemyPositionX&quot;);                float enemyPosX=float.Parse(enemyPositionX.InnerText);                save.enemyPositionX.Add(enemyPosX);//ç”±äºå¯¹è±¡saveä¸­æ•Œäººåæ ‡å£°æ˜ä¸ºListé›†åˆï¼Œæ‰€ä»¥éœ€è¦List.Addè¿›è¡Œæ•°å€¼çš„æ·»åŠ                 XmlNodeList enemyPositionY=xml.Document.GetElementsByTagName(&quot;EnemyPositionY&quot;);                float enemyPosY=float.Parse(enemyPositionY.InnerText);                save.enemyPositionYã€‚Add(enemyPosY);                XmlNodeList isDead=xml.Document.GetElementsByTagName(&quot;IsDead&quot;);            &#125;        &#125;                GameManager.instance.coins=save.coins;        player.transform.position=new Vector2(save.playerPositionX,save.playerPositionY);                for(int i=0;i&lt;save.isDead.Count;i++)&#123;    if(GameManager.instance.enemies[i]==null)&#123;        if(!save.isDead[i])//å¦‚æœæ•Œäººåœ¨æˆ‘ä»¬ä¿å­˜ä¹‹åæ­»äº†        &#123;            float enemyPosX=save.enemyPositionX[i];            float enemyPosY=save.enemyPositionY[i];            Enemy newEnemy=Instantiate(enemyPrefab,new Vector2(enemyPosX,enemyPosY),Quaternion.identity);            GameManager.Instance.enemies[i]=newBat;            //æŠŠæœ¬è¯¥æ´»ç€çš„æ•Œäººæ•°æ®è¿›è¡Œå¡«å……        &#125;else&#123;            float enemyPosX=save.enemyPositionX[i];            float enemyPosY=save.enemyPositionY[i];            Enemy newEnemy=Instantiate(enemyPrefab,new Vector2(enemyPosX,enemyPosY),Quaternion.identity);        &#125;    &#125;&#125;    &#125;    else    &#123;        Debug.LogError(&quot;NOT FOUND FILE&quot;);    &#125;&#125;</span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“-2"><a href="#æ€»ç»“-2" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>XMLä»ä¸ªäººè§‚æ„Ÿä¸Šç¡®å®å¥½äº†ä¸å°‘ï¼Œå¯æ˜¯ä½ çœ‹ç€è¿™ä»£ç ã€‚ã€‚ã€‚å±å®è®©äººå¤´çš®å‘éº»ã€‚æ¯•ç«Ÿä½ è¦åœ¨å­˜å‚¨å†…å®¹çš„åŸºç¡€ä¸Šè¿˜è¦åŠ ä¸Šç»“æ„å±‚æ¬¡ï¼Œå¤šç‚¹ä»£ç é‡çœ‹ä¸Šå»ä¹Ÿæ˜¯ç†æ‰€åº”å½“çš„ã€‚</p><h2 id="All-In-All"><a href="#All-In-All" class="headerlink" title="All In All"></a>All In All</h2><p>å…¶å®æŠŠå¯¹è±¡å‚¨å­˜è¿›æ–‡ä»¶çš„æ–¹å¼è¿˜æœ‰å¾ˆå¤šï¼Œåªæ˜¯ç›®å‰ä¸»æµæ–¹å¼å°±æ˜¯è¿™å››ç§äº†ã€‚PlayerPrefså¯ä»¥è¾ƒä¸ºç®€å•çš„è¿›è¡Œå­˜æ¡£è¯»æ¡£ï¼Œä½†æ˜¯å´åªèƒ½è¿›è¡Œä¸€äº›ç®€å•çš„æ“ä½œï¼ˆæ¯”å¦‚ç©å®¶è®¾ç½®ç­‰è½»é‡æ•°æ®ï¼‰ï¼Œå­˜å‚¨çš„æ•°å€¼ä¹Ÿåªå±€é™äºint,float,stringä¸‰ç§ç±»å‹ï¼Œè¿Listç±»éƒ½æ— æ³•æ”¯æŒã€‚åºåˆ—åŒ–å’Œååºåˆ—åŒ–çœ‹ä¼¼å¯ä»¥è§£å†³æ•°æ®çš„å­˜å‚¨å’Œè¯»å–ï¼Œè€Œä¸”å­˜æ¡£çš„å†…å®¹ä¹Ÿä¸è‡³äºè®©åˆ«äººé‚£ä¹ˆå®¹æ˜“åœ°è¿›è¡Œç¯¡æ”¹ã€‚ä½†æ˜¯æ”¹ä¸äº†ä½ è‡ªå·±ä¹Ÿè¯»ä¸æ‡‚å•Šï¼Œè€Œä¸”è¿˜è¦åŠ ä¸Šå¾ˆé•¿çš„å‘½åç©ºé—´ã€‚jsonç›¸å¯¹è€Œè¨€å°±ä¸ç”¨åŠ ä¸Šä¸€äº›å¤æ‚çš„å‘½åç©ºé—´ï¼Œå­˜å‚¨çš„æ–‡æ¡£ä¹Ÿè®©äººçœ‹å¾—æ‡‚ã€‚ä½†æ˜¯å‚¨å­˜çš„ä¸œè¥¿ä¸€ä¸‹å¤šäº†ï¼Œä½ æ‰“å¼€æ–‡æ¡£æ—¶ï¼Œé‚£ä¸å¸¦æ¢è¡Œçš„åŸå§‹jsonæ–‡ä»¶åˆç»™ä½ å¸¦æ¥ä¸€ä¸ªå…¨æ–°çš„åç‰¢ä½“éªŒã€‚XMLå°±å¾ˆå¥½çš„è§£å†³äº†æ–‡æ¡£å¯è¯»æ€§çš„é—®é¢˜ï¼Œä½†æ˜¯ç›¸å¯¹çš„ä»£ç é‡ä¹Ÿæé«˜äº†114514å€ï¼Œå‘½åç©ºé—´ä¹ŸåŠ äº†ä¸€ä¸ªã€‚å…³äºè¿™å››ç§æ–¹å¼çš„è§£å†³é—®é¢˜ï¼Œå»ºè®®è¯»è€…æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µè¿›è¡Œé€‰æ‹©ã€‚ä¸è¿‡åœ¨æˆ‘çœ‹æ¥ï¼Œjsonåº”è¯¥æ˜¯æœ€ä½³çš„é€‰æ‹©æŠŠã€‚ã€‚ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    <category term="Unity" scheme="http://example.com/categories/Unity/"/>
    
    
    <category term="æ•™ç¨‹" scheme="http://example.com/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="Unity" scheme="http://example.com/tags/Unity/"/>
    
  </entry>
  
</feed>
